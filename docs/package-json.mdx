---
title: package.json and entrypoints
description: Entrypoint detection and more.
---

# `package.json` and entry points

When developing a fleck (or any other package), we can specify the files included in the package
within our `package.json`'s `"files"` key. However, flecks augments your source `package.json`
during the build process and outputs a **built `package.json`**.

If you generate a fleck using `create-fleck`, its `"files"` key will look like this:

```json
  "files": [
    "index.js"
  ],
```

This tells flecks that `index.js` is an
[entry point](https://webpack.js.org/concepts/entry-points/). Any file resolvable by webpack will
be treated as an entry point and a separate file will be built and output.

flecks automatically adds some paths to the `"files"` key of your built `package.json`:

- `build` directory
- `src` directory (if sources exist)
- **sourcemaps** for each entry point (e.g. `index.js` -> `index.js.map`)
- `test` directory (if tests exist)

:::tip[Hook that one, too]

`@flecks/fleck` invokes a hook
[`@flecks/fleck.packageJson`](./flecks/hooks#flecksfleckpackagejson) which exposes this for any
other fleck to process `package.json` when building a fleck.

For instance, `@flecks/web` implements this hook. `@flecks/web` will automatically output
CSS, fonts, and other frontend assets to the `assets` directory in your build output. If any of
these frontend assets exist, `@flecks/web` will automatically add the `assets` directory to the
`"files"` key of your built `package.json`. You don't have to think about it!

:::

If you look at the
[published `@flecks/react` package on `npm`](https://www.npmjs.com/package/@flecks/react?activeTab=code)
you will see a tree of files published in the package:

![A screenshot showing the file tree of the `@flecks/react` package on `npm`](./flecks-react-npm.png)

However, if you look at
[the `"files"` key definition in `package.json` in the `@flecks/react` source](https://github.com/cha0s/flecks/blob/master/packages/react/package.json#L22)
you will see that it includes far fewer files:

```json
  "files": [
    "client.js",
    "context.js",
    "fake-context.js",
    "index.js",
    "router/client.js",
    "router/context.js",
    "router/index.js",
    "router/server.js",
    "server.js",
    "tabs.js"
  ],
```

Think of your `"files"` key as a sort of `exports`, but for your files. Other code could `import`
any of those paths (e.g. `@flecks/react/client`, `@flecks/react/router/client`,
`@flecks/react/tabs`, etc.).

You don't have to think about or remember any of those other files! Let flecks handle it for you.
