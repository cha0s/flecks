---
title: Command-line interface
description: Use built-in commands and write your own.
---

import Create from '@site/helpers/create';

# Command-line interface

flecks has a command-line interface for building, linting, testing, and so much more.

## Built-in commands

### `add`

```
Usage: flecks add [options] <fleck>

add a fleck to your application

Arguments:
  fleck                 fleck

Options:
  -d, --dev-dependency  add to dev dependencies
  -h, --help            display help for command
```

### `build`

```
Usage: flecks build [options] [target]

Build a target in your application.

Arguments:
  target               build target (choices: "fleck")

Options:
  -d, --no-production  dev build
  -h, --hot            build with hot module reloading
  -w, --watch          watch for changes
  --help               display help for command
```

### `clean`

```
Usage: flecks clean [options]

Remove node_modules, lock file, and build artifacts.

Options:
  -h, --help  display help for command
```

### `docusaurus`
(Implemented by `@flecks/dox`)

```
Usage: flecks docusaurus [options] <subcommand> [siteDir]

Create a documentation website for this project.

The `build` and `start` subcommands are sugar on top of the corresponding Docusaurus commands.

The `create` subcommand will create a documentation website starter template for you at `siteDir`
if `siteDir` doesn't already exist (defaults to `website`). A `docusaurus.config.js`
starter configuration will also be copied to your `build` directory if it doesn't already exist.

Arguments:
  subcommand  Docusaurus command to run (choices: "build", "create", "start")
  siteDir     Docusaurus directory (default: "website")

Options:
  -h, --help  display help for command
```

### `lint`

```
Usage: flecks lint [options]

Run ESLint.

Options:
  -h, --help  display help for command
```

### `repl`
(Implemented by `@flecks/repl`)

```
Usage: flecks repl [options]

Connect to REPL.

Options:
  -r, --rlwrap  use rlwrap around socat
  -h, --help    display help for command
```

### `test`

```
Usage: flecks test [options]

Run tests.

Options:
  -d, --no-production  dev build
  -w, --watch          watch for changes
  -v, --verbose        verbose output
  -h, --help           display help for command

The options are passed along to the `build` command.
```

## Your commands

You can implement your own command by implementing
[`@flecks/build.commands`](./flecks/hooks#flecksbuildcommands) in your fleck. Let's
run through the process.

### Implement <code>@flecks/build&#8203;.commands</code>

First, create an application:

<Create type="app" pkg="cli_test" />

Move into the new project and create a fleck:

```bash
npx create-fleck fortune
```

We're going to be creating a fortune teller command that will tell you when you will find love.
:heart_eyes:

### Create a command that takes an option

Commands are gathered during the [bootstrap phase](#todo) and therefore your hook must be
implemented in a bootstrap script.

Edit your bootstrap script at `packages/fortune/build/flecks.bootstrap.js` to look like this:

```javascript title="packages/fortune/build/flecks.bootstrap.js"
export const hooks = {
  '@flecks/build.commands': (program) => ({
    fortune: {
      options: [
        program.createOption('-n, --be-nice', 'be nice'),
      ],
      description: 'find your true love',
      action: async ({beNice}) => {
        console.log(`It will be ${Math.floor(Math.random() * 10) + 2} days until you meet your true love!`);
        if (!beNice) {
          console.log('You might also stub your toe.');
        }
      },
    },
  }),
};
```

### Inspect and invoke your command

Now, invoke flecks like so:

```bash
npx flecks --help
```

You will see among the commands listed:

```
  fortune [options]         find your true love
```

Run the command with the `--help` option:

```bash
npx flecks fortune --help
```

You will see this output:

```
Usage: flecks fortune [options]

find your true love

Options:
  -n, --be-nice  be nice
```

Let's try it!

```bash
npx flecks fortune --be-nice
```

You will see something like:

```
It will be 11 days until you meet your true love!
```

How about without our option:

```bash
npx flecks fortune
```

You will see something like:

```
It will be 7 days until you meet your true love!
You might also stub your toe.
```

### Define arguments

You can also define arguments in addition to options. Let's add an argument that takes the user's
name to personalize the output:

```javascript title="packages/fortune/build/flecks.bootstrap.js"
const {Argument} = require('@flecks/core/build/commands');

export const hooks = {
  '@flecks/build.commands': (program, flecks) => {
    return {
      fortune: {
        // highlight-start
        args: [
          program.createArgument('[name]', 'your name')
        ],
        // highlight-end
        options: [
          program.createOption('-n, --be-nice', 'be nice'),
        ],
        description: 'find your true love',
        // highlight-next-line
        action: async (name = 'person', {beNice}) => {
          // highlight-next-line
          console.log(`Hey, ${name}. It will be ${Math.floor(Math.random() * 10) + 2} days until you meet your true love!`);
          if (!beNice) {
            console.log('You might also stub your toe.');
          }
        },
      },
    };
  },
};
```

Notice that we added the argument to... the arguments.

Try it again:

```bash
npx flecks fortune --be-nice
```

You will see e.g.:

```
Hey, person. It will be 7 days until you meet your true love!
```

That's because we set the default name to `'person'` in the code above. Let's try passing in a
name:

```bash
npx flecks fortune cha0s
```

Now the output looks like:

```
Hey, cha0s. It will be 4 days until you meet your true love!
You might also stub your toe.
```

### Going further

flecks uses [Commander.js](https://github.com/tj/commander.js#quick-start) under the hood to build its CLI.
It might be worth checking out their documentation for any more advanced usage.

